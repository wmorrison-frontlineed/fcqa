(function(){'use strict';function a(a,b){function c(b,c){g(b,'serverTimeStr');var d=a(b);if(!c._ianaTimeZone)throw Error('Organization does not have the TIME ZONE specified.');h(d,'serverTimeStr');var e=c._ianaTimeZone;return d.tz(e)}function d(b){var c=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];i(b);var d=a.tz(b._ianaTimeZone).startOf('day');return c?d.toISOString():d}function e(b,c){l(c);var d=a.tz(k(b,c),c._ianaTimeZone);return d.startOf('day').toISOString()}function f(b,c){var d=!(2<arguments.length&&arguments[2]!==void 0)||arguments[2],f=a(e(b,c)).add(12,'hours');return d?f.toISOString():f}function g(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'';if('string'!=typeof a)throw TypeError(b+' must be a string with length');if(!a)throw TypeError(b+' is falsy');if(!a.endsWith('Z'))throw Error(b+' must be a valid UTC ISO format. It was: '+a)}function h(c){var d=1<arguments.length&&arguments[1]!==void 0?arguments[1]:'';if(!a.isMoment(c))throw b.error(c),new Error(d+' is not a moment object');if(!1===c._isValid)throw b.error(c),new Error(d+' is a moment object, but has an invalid date')}function i(c){var d=Math.abs;l(c);var e=a.tz.guess();if(c._ianaTimeZone!==e){var f=d(a().diff(a().startOf('day'),'minutes'));60>f&&b.warn('You may experience strange results in creating the effective date since your local time is close to a day boundary.');var g=d(a().diff(a().endOf('day'),'minutes'));60>g&&b.warn('You may experience strange results in creating the effective date since your local time is close to a day boundary.')}}function j(a,b){if(l(b),a._z&&a._z.name!==b._ianaTimeZone)throw new Error('Unable to provide accurate results due to the fact that your moment input already has timezone sensitive information (zone name: '+a._z.name+') but we expected the the timezone of '+b._ianaTimeZone+' in order to provide accurate results.');var c=a.valueOf(),d=a.clone().startOf('day').valueOf(),e=a.clone().endOf('day').valueOf(),f=a.clone().tz(b._ianaTimeZone).startOf('day').valueOf(),g=a.clone().tz(b._ianaTimeZone).endOf('day').valueOf();if(c!==d&&c!==e&&c!==f&&c!==g)throw new Error('This method can only be accurate when provided a day (not a day with times). So, please consider investigating why the source of your input provided a time component. Or consider using moment.startOf(\'day\') on the input of this function.')}function k(a,b){return h(a),j(a,b),a.format('YYYY-MM-DD')}function l(a){if(!a)throw Error('org was undefined. Please provide a proper input variable.');if(!a._ianaTimeZone)throw Error('Organization does not have the ianaTimeZone specified.')}function m(a){function b(a,b){return a.hasOwnProperty(b)?b:null}var e=a.obj,g=a.asOfDate,h=a.fromProp,i=a.toProp,j=a.type,k=a.org;if(!e)throw new Error('obj is required.');var l=b(e,h),m=b(e,i);if(!l||!m)throw new Error('your property is not supported by the '+j+' method of ssEffectiveDateHlp');var n=null==g?f(d(k),k,!1):c(g,k),o=c(e[l],k),p=c(e[m],k);return{asOf:n,fromDate:o,toDate:p}}return{todaysStartRelativeTo:d,todaysEndRelativeTo:function(b){var c=!!(1<arguments.length&&arguments[1]!==void 0)&&arguments[1];i(b);var d=a.tz(b._ianaTimeZone).endOf('day');return c?d.toISOString():d},startOfDayRelativeTo:e,endOfDayRelativeTo:function(b,c){l(c);var d=b.clone().tz(c._ianaTimeZone).endOf('day').valueOf();if(b.valueOf()===d)return b.toISOString();var e=a.tz(k(b,c),c._ianaTimeZone);return e.endOf('day').toISOString()},utcIsoToRelativeMoment:c,isCurrent:function(a){var b=a.obj,c=a.asOfDate,d=c===void 0?null:c,e=a.fromProp,f=e===void 0?'_fromDateUtc':e,g=a.toProp,h=g===void 0?'_toDateUtc':g,i=a.org;l(i);var j=m({obj:b,asOfDate:d,fromProp:f,toProp:h,type:'isCurrent',org:i});return j.fromDate.isSameOrBefore(j.asOf)&&j.toDate.isSameOrAfter(j.asOf)},isInPast:function(a){var b=a.obj,c=a.asOfDate,d=c===void 0?null:c,e=a.fromProp,f=e===void 0?'_fromDateUtc':e,g=a.toProp,h=g===void 0?'_toDateUtc':g,i=a.org;l(i);var j=m({obj:b,asOfDate:d,fromProp:f,toProp:h,type:'isPast',org:i});return j.fromDate.isBefore(j.asOf)&&j.toDate.isSameOrBefore(j.asOf)},isInFuture:function(a){var b=a.obj,c=a.asOfDate,d=c===void 0?null:c,e=a.fromProp,f=e===void 0?'_fromDateUtc':e,g=a.toProp,h=g===void 0?'_toDateUtc':g,i=a.org;l(i);var j=m({obj:b,asOfDate:d,fromProp:f,toProp:h,type:'isFuture',org:i});return j.fromDate.isAfter(j.asOf)&&j.toDate.isAfter(j.asOf)},safeAsOfDateRelativeTo:f,safeNowRelativeTo:function(b){return l(b),a.tz(b._ianaTimeZone)}}}a.$inject=['moment','$log'],angular.module('super-suit-helpers').factory('ssDateByOrgHlp',a)})();
